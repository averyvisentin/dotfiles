#  _   _                  _                 _
# | | | |_   _ _ __  _ __| | __ _ _ __   __| |
# | |_| | | | | '_ \| '__| |/ _` | '_ \ / _` |
# |  _  | |_| | |_) | |  | | (_| | | | | (_| |
# |_| |_|\__, | .__/|_|  |_|\__,_|_| |_|\__,_|
#        |___/|_|
#
# -----------------------------------------------------
# Load configuration files
# -----------------------------------------------------
#source = ~/.cache/wal/colors-hyprland.conf # Load pywal color file
source = ~/.config/hypr/colors.conf
source = ~/.config/hypr/conf/workspace.conf
source = ~/.config/hypr/conf/keybinding.conf
source = ~/.config/hypr/conf/windowrule.conf
source = ~/.config/hypr/conf/animations/animations-dynamic.conf
source = ~/.config/hypr/conf/plugins.conf
#source = ~/.config/hypr/conf/env.conf

# -----------------------------------------------------
# Monitor #https://wiki.hypr.land/Configuring/Monitors/
# -----------------------------------------------------
monitorv2 {
    output = DP-1
    mode = 1920x1080@144
    position = 0x0
    scale = 1
    }
monitorv2 {
    output = DP-2
    mode = 2560x1440@74
    position = -2560x0
    scale = 1.0
    }

# -----------------------------------------------------
# Autostart
# -------------------------------------- ---------------
exec-once = uwsm app -s b -- hyprpm reload         #hyprland plugin manager
exec-once = uwsm app -s b -- hypridle & wl-paste --watch cliphist store   # hypridle and clipboard ##these we're running all under a single thread
exec-once = uwsm app -s b -- swww-daemon
exec-once = uwsm app -s b -- hyprpanel ## start hyprpanel
#exec-once = vicinae server
# exec-once = python ~/.config/hypr/scripts/ch-wall.py
#exec-once = uwsm app -s b -- ~/.config/hypr/scripts/xdg.sh  # Load GTK settings
# -----------------------------------------------------
# Input # https://wiki.hyprland.org/Configuring/Variables/#input
# -----------------------------------------------------
################
##CURSOR THEME##
################
#exec-once = uwsm app -s b -- hyprctl setcursor breeze_cursors 24 ##set cursor

cursor {
        no_break_fs_vrr = 1                 # disables scheduling new frames on cursor movement for fullscreen apps with VRR enabled to avoid framerate spikes (requires no_hardware_cursors = true) ##BREAKS VRR and VFR, DISABLE##
        no_hardware_cursors = 1
        sync_gsettings_theme = true #sync xcursor theme with gsettings, it applies cursor-theme and cursor-size on theme load to gsettings making most CSD gtk based clients use same xcursor theme and size.
        enable_hyprcursor = true           # I am on nvidia, not sure if it works but don't care to check
        default_monitor = [DP-1]            # use hyprctl monitors to get monitor name
        use_cpu_buffer = 2                  # 0 - off, 1 - on, 2 - auto (nvidia only)
        persistent_warps = true        # When a window is refocused, the cursor returns to its last position relative to that window, rather than to the centre.
        hotspot_padding = 2            # padding between cursor and monitor edge
        #allow_dumb_copy = false
        min_refresh_rate = 30       # default is 24fps
        inactive_timeout = 0       # mouse will be hidden after x seconds of inactivity #seems to not be respected, or 20 seconds is shorter than I remember
}



input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    numlock_by_default = true
    mouse_refocus = true
    accel_profile = flat

    off_window_axis_events = 1
    follow_mouse = 1
    scroll_factor = 3
    sensitivity = 0 # Pointer speed: -1.0 - 1.0, 0 means no modification.

    repeat_rate = 30
    repeat_delay = 750
    # For United States
    # kb_layout = us
    # kb_variant = intl
    # kb_model = pc105
    # kb_options =
   # tablet:absolute_region_position=true
    #touchdevice:transform=-1
    #touchdevice:output=DP-1
    #tablet:output=auto
}


misc {
    focus_on_activate=true
    middle_click_paste = false
    mouse_move_focuses_monitor=true     #I've noticed this isn't being honored when nothing on screen
}

# -----------------------------------------------------
# General window decoration
# -----------------------------------------------------

general {
    gaps_in = 2
    gaps_out = 2
    border_size = 2
    col.active_border = $tertiary     #This the light
    col.inactive_border = $primary       #dark dark dark
    layout = dwindle        #dwindle or master
    resize_on_border = true     #for the dragging like windows
    extend_border_grab_area = 5
    hover_icon_on_border=true       #the lil dumb icon showing your can do it
        snap {
        enabled=true    #floating windows will attempt to snap to edges
        }
}

decoration {
    rounding = 10
    rounding_power = 2
    active_opacity = 1.0
    inactive_opacity = 0.85
    fullscreen_opacity = 1.0
    border_part_of_window = true
        blur {
            enabled = false
            size = 2

            passes = 2
            new_optimizations = true
            ignore_opacity = true
            xray = false
            # blurls = waybar
        }
        shadow {
            enabled = false
            range = 0
            render_power = 0
            color = 0x66000000
        }
}

# -----------------------------------------------------
# Layouts
# -----------------------------------------------------
dwindle {
    pseudotile = false
    preserve_split = true
    permanent_direction_override = true
    smart_split=true
    smart_resizing=true
    use_active_for_splits=true
    split_width_multiplier=0.1
    precise_mouse_move=true         #bindm movewindow will drop the window more precisely depending on where your mouse is.
    }

master {
    smart_resizing = true
    allow_small_split=false
    orientation = center
    slave_count_for_center_master = 1
    center_master_fallback = left
    drop_at_cursor = false
    new_status = inherit
    new_on_top = false
    new_on_active = before
}

binds {
  workspace_back_and_forth = true
  pass_mouse_when_bound = false
  window_direction_monitor_fallback = true
}



# -----------------------------------------------------
# Environment
# -----------------------------------------------------
#/home/avery/.config/uwsm/env-hyprland
render {
    direct_scanout = 1                      #reduce lag when there is only one fullscreen application on a screen (e.g. game). It is also recommended to set this to false if the fullscreen application shows graphical glitches. 0 - off, 1 - on, 2 - auto #I would just leave this enabled, have not had issues yet.
    cm_enabled = true                    #Whether the color management pipeline should be enabled or not (requires a restart of Hyprland to fully take effect)
    #cm_fs_passthrough = 2             #Passthrough color settings for fullscreen apps when possible. 0 - off, 1 - always, 2 - hdr only
    new_render_scheduling = true        #bool    Automatically uses triple buffering when needed, improves FPS on underpowered devices. https://wiki.hypr.land/0.50.0/Configuring/Variables/#render
}
opengl {
    nvidia_anti_flicker = false            #reduces flickering on nvidia at the cost of possible frame drops on lower-end GPUs. On non-nvidia, this is ignored.
}

misc {
    disable_hyprland_logo =true
    disable_splash_rendering =true
    initial_workspace_tracking = 1
    disable_autoreload = false
    vfr = true                                           #if there's flickering it's probably one of vfr or vrr (see monitor above)
    vrr = 0                                               #controls the VRR (Adaptive Sync) of your monitors. 0 - off, 1 - on, 2 - fullscreen only, 3 - fullscreen with video or game content type [0/1/2/3]
    animate_manual_resizes = true
    enable_anr_dialog = false                               #dumb app not respond dialog box
}


xwayland {
    enabled=true
    force_zero_scaling = false
 }

debug {
    full_cm_proto = true                    #claims support for all cm proto features (requires restart)
}

#experimental {
#    xx_color_management_v4 = false     # 	enable color management protocol
#}

##  https://wiki.hypr.land/0.47.0/Configuring/Variables/#experimental

#Steam:
#DXVK_HDR=1 gamescope -f --hdr-enabled -- %command%

#ENABLE_HDR_WSI=1 DXVK_HDR=1 DISPLAY= %command% (requires wayland-enabled proton version)

#Non-steam:
#ENABLE_HDR_WSI=1 DXVK_HDR=1 DISPLAY= wine executable.exe

#Video:
#ENABLE_HDR_WSI=1 mpv --vo=gpu-next --target-colorspace-hint --gpu-api=vulkan --gpu-context=waylandvk "filename"
#
#
